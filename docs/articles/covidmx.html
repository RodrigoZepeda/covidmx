<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="es">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="covidmx">
<title>Introducción a covidmx • covidmx</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><link href="../deps/Playfair_Display-0.4.2/font.css" rel="stylesheet">
<link href="../deps/Playfair_Display_SC-0.4.2/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introducción a covidmx">
<meta property="og:description" content="covidmx">
<meta property="og:image" content="https://rodrigozepeda.github.io/covidmx/reference/figures/card.png">
<meta property="og:image:alt" content="Logo de covidmx presenta una ola ajustada por splines con varios puntos">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:creator" content="@RodZepeda">
<meta name="twitter:site" content="@RodZepeda">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Ir al contenido</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">covidmx</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.0.0000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Cambiar la navegación">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/covidmx.html">Primeros pasos</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Índice</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-art-culos">Artículos</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-art-culos">
    <a class="dropdown-item" href="../articles/Estudio_de_Caso_CDMX.html">Estudio de caso: Ciudad de México</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Registro de cambios</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Cambiar la navegación" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Buscar" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="http://twitter.com/RodZepeda" aria-label="Twitter">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/RodrigoZepeda/covidmx/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Introducción a covidmx</h1>
                        <h4 data-toc-skip class="author">Rodrigo
Zepeda-Tello</h4>
            
      
      <small class="dont-index">Código: <a href="https://github.com/RodrigoZepeda/covidmx/blob/HEAD/vignettes/articles/covidmx.Rmd" class="external-link"><code>vignettes/articles/covidmx.Rmd</code></a></small>
      <div class="d-none name"><code>covidmx.Rmd</code></div>
    </div>

    
    
<p>La librería de <code>covidmx</code> está para ayudarte a analizar los
datos abiertos de COVID-19 de México, generar estadísticos de interés y
visualizaciones rápidas. La idea es ahorrarte tiempo.</p>
<div class="section level2">
<h2 id="instalación">Instalación<a class="anchor" aria-label="anchor" href="#instalaci%C3%B3n"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#install.packages("remotes")</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"RodrigoZepeda/covidmx"</span><span class="op">)</span></span></code></pre></div>
<p>No olvides llamar la librería y ¡a codear!</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/RodrigoZepeda/covidmx" class="external-link">covidmx</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></code></pre></div>
<blockquote>
<p><strong>NOTA (datos precargados)</strong> Si lo que quieres hacer es
ponerte a jugar con las funciones del paquete directamente puedes saltar
hasta la sección de <a href="#casos">casos</a> y usar los datos
precargados:</p>
</blockquote>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos_covid</span> <span class="op">&lt;-</span> <span class="fu">covidmx</span><span class="fu">::</span><span class="va"><a href="../reference/datosabiertos.html">datosabiertos</a></span> <span class="co">#Uso de los datos precargados</span></span></code></pre></div>
<blockquote>

</blockquote>
</div>
<div class="section level2">
<h2 id="datos-abiertos-de-la-dirección-general-de-epidemiología">Datos Abiertos de la Dirección General de Epidemiología<a class="anchor" aria-label="anchor" href="#datos-abiertos-de-la-direcci%C3%B3n-general-de-epidemiolog%C3%ADa"></a>
</h2>
<div class="section level3">
<h3 id="descarga-automática-de-base-de-datos-abiertos">Descarga automática de base de datos abiertos<a class="anchor" aria-label="anchor" href="#descarga-autom%C3%A1tica-de-base-de-datos-abiertos"></a>
</h3>
<p>Lo más importante es comenzar descargando la base de datos abiertos.
Esto lo puedes hacer como sigue:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos_covid</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/descarga_datos_abiertos.html">descarga_datos_abiertos</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Para propósito de este tutorial trabajaremos con una base de datos
más pequeña disponible en el repositorio de <a href="https://github.com/RodrigoZepeda/covidmx" class="external-link">Github</a> la cual
guardaremos en <code>duckdb</code> bajo el nombre de
<strong>tutorial</strong>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Cómo vas a guardar tu base .duckdb</span></span>
<span><span class="va">base_duck</span>   <span class="op">&lt;-</span> <span class="st">"mi_archivo.duckdb"</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dlink</span>       <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"tutorial"</span> <span class="op">=</span> </span>
<span>                   <span class="st">"https://github.com/RodrigoZepeda/covidmx/raw/main/datos_abiertos_covid19.zip"</span><span class="op">)</span></span>
<span><span class="va">datos_covid</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/descarga_datos_abiertos.html">descarga_datos_abiertos</a></span><span class="op">(</span>sites.covid <span class="op">=</span> <span class="va">dlink</span>, tblname <span class="op">=</span> <span class="st">"tutorial"</span>, </span>
<span>                                       dbdir <span class="op">=</span> <span class="va">base_duck</span><span class="op">)</span> </span></code></pre></div>
<p>La descarga contiene una conexión a <code>duckdb</code> dentro de
<code>datos_covid$dats</code> la cual puedes operar con <a href="https://dbplyr.tidyverse.org/" class="external-link"><code>dbplyr</code></a>.</p>
<p><strong>NO</strong> se agregan las etiquetas a los datos pues es muy
tardado hacerlo:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos_covid</span><span class="op">$</span><span class="va">dats</span> <span class="op">|&gt;</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: ??</span></span>
<span><span class="co">#&gt; Columns: 40</span></span>
<span><span class="co">#&gt; Database: DuckDB 0.3.5-dev1410 [root@Darwin 21.5.0:R 4.2.0//var/folders/42/2kdf45dd1qz5n7kf9lm8ld9r0000gn/T//Rtmp3x4EDm/file135581140e758.duckdb]</span></span>
<span><span class="co">#&gt; $ FECHA_ACTUALIZACION   <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span> 2022-07-14, 2022-07-14, 2022-07-14, 2022-07-14,…</span></span>
<span><span class="co">#&gt; $ ID_REGISTRO           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "78ce0b", "526821", "4ab051", "ba3171", "b970bb"…</span></span>
<span><span class="co">#&gt; $ ORIGEN                <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 2, 1, 1, 1, 1, 2, 1, 2, 1, 1, 1, 2, 1, 1, 2, 2, …</span></span>
<span><span class="co">#&gt; $ SECTOR                <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 12, 4, 4, 4, 6, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4,…</span></span>
<span><span class="co">#&gt; $ ENTIDAD_UM            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "03", "03", "03", "03", "03", "03", "03", "03", …</span></span>
<span><span class="co">#&gt; $ SEXO                  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 1, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, …</span></span>
<span><span class="co">#&gt; $ ENTIDAD_NAC           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "09", "03", "25", "03", "03", "25", "03", "17", …</span></span>
<span><span class="co">#&gt; $ ENTIDAD_RES           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "03", "03", "03", "03", "03", "03", "03", "03", …</span></span>
<span><span class="co">#&gt; $ MUNICIPIO_RES         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "003", "008", "008", "008", "003", "003", "008",…</span></span>
<span><span class="co">#&gt; $ TIPO_PACIENTE         <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, …</span></span>
<span><span class="co">#&gt; $ FECHA_INGRESO         <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span> 2021-07-08, 2021-07-01, 2021-07-01, 2021-07-01,…</span></span>
<span><span class="co">#&gt; $ FECHA_SINTOMAS        <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span> 2021-07-04, 2021-07-01, 2021-07-01, 2021-07-01,…</span></span>
<span><span class="co">#&gt; $ FECHA_DEF             <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</span></span>
<span><span class="co">#&gt; $ INTUBADO              <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 2, 9…</span></span>
<span><span class="co">#&gt; $ NEUMONIA              <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 2, 2, 2, 2, …</span></span>
<span><span class="co">#&gt; $ EDAD                  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 17, 28, 30, 22, 32, 35, 24, 40, 21, 78, 13, 54, …</span></span>
<span><span class="co">#&gt; $ NACIONALIDAD          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, …</span></span>
<span><span class="co">#&gt; $ EMBARAZO              <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 2, 97, 97, 97, 97, 97, 97, 2, 2, 2, 2, 2, 2, 2, …</span></span>
<span><span class="co">#&gt; $ HABLA_LENGUA_INDIG    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 99, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,…</span></span>
<span><span class="co">#&gt; $ INDIGENA              <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 99, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,…</span></span>
<span><span class="co">#&gt; $ DIABETES              <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 2, 2, 2, 2, …</span></span>
<span><span class="co">#&gt; $ EPOC                  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 2, 2, 2, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, …</span></span>
<span><span class="co">#&gt; $ ASMA                  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, …</span></span>
<span><span class="co">#&gt; $ INMUSUPR              <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, …</span></span>
<span><span class="co">#&gt; $ HIPERTENSION          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, …</span></span>
<span><span class="co">#&gt; $ OTRA_COM              <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, …</span></span>
<span><span class="co">#&gt; $ CARDIOVASCULAR        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, …</span></span>
<span><span class="co">#&gt; $ OBESIDAD              <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 2, 1, 1, 2, 2, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, …</span></span>
<span><span class="co">#&gt; $ RENAL_CRONICA         <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, …</span></span>
<span><span class="co">#&gt; $ TABAQUISMO            <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 2, 2, 2, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, …</span></span>
<span><span class="co">#&gt; $ OTRO_CASO             <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 2, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, …</span></span>
<span><span class="co">#&gt; $ TOMA_MUESTRA_LAB      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 1, 2, 2, 2, 2, 1, 2, 2, 2, 2, 2, 1, 2, 2, 2, 2, …</span></span>
<span><span class="co">#&gt; $ RESULTADO_LAB         <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 2, 97, 97, 97, 97, 1, 97, 97, 97, 97, 97, 4, 97,…</span></span>
<span><span class="co">#&gt; $ TOMA_MUESTRA_ANTIGENO <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, …</span></span>
<span><span class="co">#&gt; $ RESULTADO_ANTIGENO    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 2, 2, 1, 2, 2, 1, 1, 1, 2, 2, 1, 2, 2, 2, 2, 2, …</span></span>
<span><span class="co">#&gt; $ CLASIFICACION_FINAL   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 7, 7, 3, 7, 7, 3, 3, 3, 7, 7, 3, 6, 7, 7, 7, 7, …</span></span>
<span><span class="co">#&gt; $ MIGRANTE              <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, …</span></span>
<span><span class="co">#&gt; $ PAIS_NACIONALIDAD     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "México", "México", "México", "México", "México"…</span></span>
<span><span class="co">#&gt; $ PAIS_ORIGEN           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "97", "97", "97", "97", "97", "97", "97", "97", …</span></span>
<span><span class="co">#&gt; $ UCI                   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 2, 9…</span></span></code></pre></div>
<p>Sin embargo el diccionario se almacena como una lista en
<code>dict</code> para su consulta y uso por las funciones internas:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos_covid</span><span class="op">$</span><span class="va">dict</span> <span class="op">|&gt;</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 31</span></span>
<span><span class="co">#&gt;  $ ORIGEN               : tibble [3 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ CLAVE      : num [1:3] 1 2 99</span></span>
<span><span class="co">#&gt;   ..$ DESCRIPCIÓN: chr [1:3] "USMER" "FUERA DE USMER" "NO ESPECIFICADO"</span></span>
<span><span class="co">#&gt;  $ SECTOR               : tibble [14 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ CLAVE      : num [1:14] 1 2 3 4 5 6 7 8 9 10 ...</span></span>
<span><span class="co">#&gt;   ..$ DESCRIPCIÓN: chr [1:14] "CRUZ ROJA" "DIF" "ESTATAL" "IMSS" ...</span></span>
<span><span class="co">#&gt;  $ SEXO                 : tibble [3 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ CLAVE      : num [1:3] 1 2 99</span></span>
<span><span class="co">#&gt;   ..$ DESCRIPCIÓN: chr [1:3] "MUJER" "HOMBRE" "NO ESPECIFICADO"</span></span>
<span><span class="co">#&gt;  $ PACIENTE             : tibble [3 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ CLAVE      : num [1:3] 1 2 99</span></span>
<span><span class="co">#&gt;   ..$ DESCRIPCIÓN: chr [1:3] "AMBULATORIO" "HOSPITALIZADO" "NO ESPECIFICADO"</span></span>
<span><span class="co">#&gt;  $ NACIONALIDAD         : tibble [3 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ CLAVE      : num [1:3] 1 2 99</span></span>
<span><span class="co">#&gt;   ..$ DESCRIPCIÓN: chr [1:3] "MEXICANA" "EXTRANJERA" "NO ESPECIFICADO"</span></span>
<span><span class="co">#&gt;  $ RESULTADO_LAB        : tibble [5 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ CLAVE      : num [1:5] 1 2 3 4 97</span></span>
<span><span class="co">#&gt;   ..$ DESCRIPCIÓN: chr [1:5] "POSITIVO A SARS-COV-2" "NO POSITIVO A SARS-COV-2" "RESULTADO PENDIENTE" "RESULTADO NO ADECUADO" ...</span></span>
<span><span class="co">#&gt;  $ RESULTADO_ANTIGENO   : tibble [3 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ CLAVE      : num [1:3] 1 2 97</span></span>
<span><span class="co">#&gt;   ..$ DESCRIPCIÓN: chr [1:3] "POSITIVO A SARS-COV-2" "NEGATIVO A SARS-COV-2" "NO APLICA (CASO SIN MUESTRA)"</span></span>
<span><span class="co">#&gt;  $ CLASIFICACION_FINAL  : tibble [7 × 3] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ CLAVE        : num [1:7] 1 2 3 4 5 6 7</span></span>
<span><span class="co">#&gt;   ..$ CLASIFICACIÓN: chr [1:7] "CASO DE COVID-19 CONFIRMADO POR ASOCIACIÓN CLÍNICA EPIDEMIOLÓGICA" "CASO DE COVID-19 CONFIRMADO POR COMITÉ DE  DICTAMINACIÓN" "CASO DE SARS-COV-2  CONFIRMADO" "INVÁLIDO POR LABORATORIO" ...</span></span>
<span><span class="co">#&gt;   ..$ DESCRIPCIÓN  : chr [1:7] "Confirmado por asociación aplica cuando el caso informó ser contacto de un positivo a COVID-19 (y este se encue"| __truncated__ "Confirmado por dictaminación solo aplica para defunciones bajo las siguientes condiciones: \r\nAl caso no se le"| __truncated__ "Confirmado aplica cuando:\r\nEl caso tiene muestra de laboratorio o prueba antigénica y resultó positiva  a SAR"| __truncated__ "Inválido aplica cuando el caso no tienen asociación clínico epidemiológica, ni dictaminación a COVID-19. Se le "| __truncated__ ...</span></span>
<span><span class="co">#&gt;  $ MUNICIPIO_RES        : tibble [2,501 × 3] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ CLAVE_MUNICIPIO: chr [1:2501] "001" "002" "003" "004" ...</span></span>
<span><span class="co">#&gt;   ..$ MUNICIPIO      : chr [1:2501] "AGUASCALIENTES" "ASIENTOS" "CALVILLO" "COSÍO" ...</span></span>
<span><span class="co">#&gt;   ..$ CLAVE_ENTIDAD  : chr [1:2501] "01" "01" "01" "01" ...</span></span>
<span><span class="co">#&gt;  $ INTUBADO             : tibble [5 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ CLAVE      : num [1:5] 1 2 97 98 99</span></span>
<span><span class="co">#&gt;   ..$ DESCRIPCIÓN: chr [1:5] "SI" "NO" "NO APLICA" "SE IGNORA" ...</span></span>
<span><span class="co">#&gt;  $ NEUMONIA             : tibble [5 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ CLAVE      : num [1:5] 1 2 97 98 99</span></span>
<span><span class="co">#&gt;   ..$ DESCRIPCIÓN: chr [1:5] "SI" "NO" "NO APLICA" "SE IGNORA" ...</span></span>
<span><span class="co">#&gt;  $ EMBARAZO             : tibble [5 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ CLAVE      : num [1:5] 1 2 97 98 99</span></span>
<span><span class="co">#&gt;   ..$ DESCRIPCIÓN: chr [1:5] "SI" "NO" "NO APLICA" "SE IGNORA" ...</span></span>
<span><span class="co">#&gt;  $ HABLA LENGUA INDIGENA: tibble [5 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ CLAVE      : num [1:5] 1 2 97 98 99</span></span>
<span><span class="co">#&gt;   ..$ DESCRIPCIÓN: chr [1:5] "SI" "NO" "NO APLICA" "SE IGNORA" ...</span></span>
<span><span class="co">#&gt;  $ INDIGENA             : tibble [5 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ CLAVE      : num [1:5] 1 2 97 98 99</span></span>
<span><span class="co">#&gt;   ..$ DESCRIPCIÓN: chr [1:5] "SI" "NO" "NO APLICA" "SE IGNORA" ...</span></span>
<span><span class="co">#&gt;  $ DIABETES             : tibble [5 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ CLAVE      : num [1:5] 1 2 97 98 99</span></span>
<span><span class="co">#&gt;   ..$ DESCRIPCIÓN: chr [1:5] "SI" "NO" "NO APLICA" "SE IGNORA" ...</span></span>
<span><span class="co">#&gt;  $ EPOC                 : tibble [5 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ CLAVE      : num [1:5] 1 2 97 98 99</span></span>
<span><span class="co">#&gt;   ..$ DESCRIPCIÓN: chr [1:5] "SI" "NO" "NO APLICA" "SE IGNORA" ...</span></span>
<span><span class="co">#&gt;  $ ASMA                 : tibble [5 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ CLAVE      : num [1:5] 1 2 97 98 99</span></span>
<span><span class="co">#&gt;   ..$ DESCRIPCIÓN: chr [1:5] "SI" "NO" "NO APLICA" "SE IGNORA" ...</span></span>
<span><span class="co">#&gt;  $ INMUSUPR             : tibble [5 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ CLAVE      : num [1:5] 1 2 97 98 99</span></span>
<span><span class="co">#&gt;   ..$ DESCRIPCIÓN: chr [1:5] "SI" "NO" "NO APLICA" "SE IGNORA" ...</span></span>
<span><span class="co">#&gt;  $ HIPERTENSION         : tibble [5 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ CLAVE      : num [1:5] 1 2 97 98 99</span></span>
<span><span class="co">#&gt;   ..$ DESCRIPCIÓN: chr [1:5] "SI" "NO" "NO APLICA" "SE IGNORA" ...</span></span>
<span><span class="co">#&gt;  $ CARDIOVASCULAR       : tibble [5 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ CLAVE      : num [1:5] 1 2 97 98 99</span></span>
<span><span class="co">#&gt;   ..$ DESCRIPCIÓN: chr [1:5] "SI" "NO" "NO APLICA" "SE IGNORA" ...</span></span>
<span><span class="co">#&gt;  $ OTRO_CASO            : tibble [5 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ CLAVE      : num [1:5] 1 2 97 98 99</span></span>
<span><span class="co">#&gt;   ..$ DESCRIPCIÓN: chr [1:5] "SI" "NO" "NO APLICA" "SE IGNORA" ...</span></span>
<span><span class="co">#&gt;  $ TOMA_MUESTRA_LAB     : tibble [5 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ CLAVE      : num [1:5] 1 2 97 98 99</span></span>
<span><span class="co">#&gt;   ..$ DESCRIPCIÓN: chr [1:5] "SI" "NO" "NO APLICA" "SE IGNORA" ...</span></span>
<span><span class="co">#&gt;  $ TOMA_MUESTRA_ANTIGENO: tibble [5 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ CLAVE      : num [1:5] 1 2 97 98 99</span></span>
<span><span class="co">#&gt;   ..$ DESCRIPCIÓN: chr [1:5] "SI" "NO" "NO APLICA" "SE IGNORA" ...</span></span>
<span><span class="co">#&gt;  $ OTRA_COMORBILIDAD    : tibble [5 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ CLAVE      : num [1:5] 1 2 97 98 99</span></span>
<span><span class="co">#&gt;   ..$ DESCRIPCIÓN: chr [1:5] "SI" "NO" "NO APLICA" "SE IGNORA" ...</span></span>
<span><span class="co">#&gt;  $ OBESIDAD             : tibble [5 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ CLAVE      : num [1:5] 1 2 97 98 99</span></span>
<span><span class="co">#&gt;   ..$ DESCRIPCIÓN: chr [1:5] "SI" "NO" "NO APLICA" "SE IGNORA" ...</span></span>
<span><span class="co">#&gt;  $ RENAL_CRONICA        : tibble [5 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ CLAVE      : num [1:5] 1 2 97 98 99</span></span>
<span><span class="co">#&gt;   ..$ DESCRIPCIÓN: chr [1:5] "SI" "NO" "NO APLICA" "SE IGNORA" ...</span></span>
<span><span class="co">#&gt;  $ TABAQUISMO           : tibble [5 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ CLAVE      : num [1:5] 1 2 97 98 99</span></span>
<span><span class="co">#&gt;   ..$ DESCRIPCIÓN: chr [1:5] "SI" "NO" "NO APLICA" "SE IGNORA" ...</span></span>
<span><span class="co">#&gt;  $ UCI                  : tibble [5 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ CLAVE      : num [1:5] 1 2 97 98 99</span></span>
<span><span class="co">#&gt;   ..$ DESCRIPCIÓN: chr [1:5] "SI" "NO" "NO APLICA" "SE IGNORA" ...</span></span>
<span><span class="co">#&gt;  $ ENTIDAD_UM           : tibble [36 × 3] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ CLAVE_ENTIDAD     : chr [1:36] "01" "02" "03" "04" ...</span></span>
<span><span class="co">#&gt;   ..$ ENTIDAD_FEDERATIVA: chr [1:36] "AGUASCALIENTES" "BAJA CALIFORNIA" "BAJA CALIFORNIA SUR" "CAMPECHE" ...</span></span>
<span><span class="co">#&gt;   ..$ ABREVIATURA       : chr [1:36] "AS" "BC" "BS" "CC" ...</span></span>
<span><span class="co">#&gt;  $ ENTIDAD_RES          : tibble [36 × 3] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ CLAVE_ENTIDAD     : chr [1:36] "01" "02" "03" "04" ...</span></span>
<span><span class="co">#&gt;   ..$ ENTIDAD_FEDERATIVA: chr [1:36] "AGUASCALIENTES" "BAJA CALIFORNIA" "BAJA CALIFORNIA SUR" "CAMPECHE" ...</span></span>
<span><span class="co">#&gt;   ..$ ABREVIATURA       : chr [1:36] "AS" "BC" "BS" "CC" ...</span></span>
<span><span class="co">#&gt;  $ ENTIDAD_NAC          : tibble [36 × 3] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ CLAVE_ENTIDAD     : chr [1:36] "01" "02" "03" "04" ...</span></span>
<span><span class="co">#&gt;   ..$ ENTIDAD_FEDERATIVA: chr [1:36] "AGUASCALIENTES" "BAJA CALIFORNIA" "BAJA CALIFORNIA SUR" "CAMPECHE" ...</span></span>
<span><span class="co">#&gt;   ..$ ABREVIATURA       : chr [1:36] "AS" "BC" "BS" "CC" ...</span></span></code></pre></div>
<p>por ejemplo para ver el diccionario de antígeno:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos_covid</span><span class="op">$</span><span class="va">dict</span><span class="op">$</span><span class="va">RESULTADO_ANTIGENO</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 2</span></span></span>
<span><span class="co">#&gt;   CLAVE DESCRIPCIÓN                 </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     1 POSITIVO A SARS-COV-2       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>     2 NEGATIVO A SARS-COV-2       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>    97 NO APLICA (CASO SIN MUESTRA)</span></span></code></pre></div>
<blockquote>
<p><strong>¿Se te fue el Internet?</strong> No te preocupes,
<code>descarga_datos_abiertos</code> trabajará con tu descarga más
reciente.</p>
</blockquote>
</div>
<div class="section level3">
<h3 id="lectura-desde-duckdb">Lectura desde duckdb<a class="anchor" aria-label="anchor" href="#lectura-desde-duckdb"></a>
</h3>
<p>No es necesario volver a descargar si reinicias tu sesión de
<code>R</code> siempre y cuando los hayas guardado en
<code>duckdb</code> estableciendo un <code>dbdir</code> (de lo contrario
la base de datos sólo dura lo que dure tu sesión de <code>R</code>).
Puedes sólo leer los datos abiertos que ya tienes usando la función
<code>read_datos_abiertos.R</code>;</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/read_datos_abiertos.html">read_datos_abiertos</a></span><span class="op">(</span><span class="va">base_duck</span>, tblname <span class="op">=</span> <span class="st">"tutorial"</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 3</span></span>
<span><span class="co">#&gt;  $ dats      :List of 2</span></span>
<span><span class="co">#&gt;   ..$ src       :List of 2</span></span>
<span><span class="co">#&gt;   .. ..$ con  :Formal class 'duckdb_connection' [package "duckdb"] with 5 slots</span></span>
<span><span class="co">#&gt;   .. ..$ disco: NULL</span></span>
<span><span class="co">#&gt;   .. ..- attr(*, "class")= chr [1:4] "src_duckdb_connection" "src_dbi" "src_sql" "src"</span></span>
<span><span class="co">#&gt;   ..$ lazy_query:List of 13</span></span>
<span><span class="co">#&gt;   .. ..$ x                :List of 13</span></span>
<span><span class="co">#&gt;   .. .. ..- attr(*, "class")= chr [1:2] "lazy_select_query" "lazy_query"</span></span>
<span><span class="co">#&gt;   .. ..$ select           : tibble [40 × 5] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   .. ..$ where            : NULL</span></span>
<span><span class="co">#&gt;   .. ..$ group_by         : NULL</span></span>
<span><span class="co">#&gt;   .. ..$ order_by         : NULL</span></span>
<span><span class="co">#&gt;   .. ..$ distinct         : logi FALSE</span></span>
<span><span class="co">#&gt;   .. ..$ limit            : NULL</span></span>
<span><span class="co">#&gt;   .. ..$ select_operation : chr "mutate"</span></span>
<span><span class="co">#&gt;   .. ..$ last_op          : chr "mutate"</span></span>
<span><span class="co">#&gt;   .. ..$ message_summarise: NULL</span></span>
<span><span class="co">#&gt;   .. ..$ group_vars       : chr(0) </span></span>
<span><span class="co">#&gt;   .. ..$ order_vars       : NULL</span></span>
<span><span class="co">#&gt;   .. ..$ frame            : NULL</span></span>
<span><span class="co">#&gt;   .. ..- attr(*, "class")= chr [1:2] "lazy_select_query" "lazy_query"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "class")= chr [1:5] "tbl_duckdb_connection" "tbl_dbi" "tbl_sql" "tbl_lazy" ...</span></span>
<span><span class="co">#&gt;  $ disconnect:function ()  </span></span>
<span><span class="co">#&gt;  $ dict      :List of 31</span></span>
<span><span class="co">#&gt;   ..$ ORIGEN               : tibble [3 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ SECTOR               : tibble [14 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ SEXO                 : tibble [3 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ PACIENTE             : tibble [3 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ NACIONALIDAD         : tibble [3 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ RESULTADO_LAB        : tibble [5 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ RESULTADO_ANTIGENO   : tibble [3 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ CLASIFICACION_FINAL  : tibble [7 × 3] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ MUNICIPIO_RES        : tibble [2,501 × 3] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ INTUBADO             : tibble [5 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ NEUMONIA             : tibble [5 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ EMBARAZO             : tibble [5 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ HABLA LENGUA INDIGENA: tibble [5 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ INDIGENA             : tibble [5 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ DIABETES             : tibble [5 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ EPOC                 : tibble [5 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ ASMA                 : tibble [5 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ INMUSUPR             : tibble [5 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ HIPERTENSION         : tibble [5 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ CARDIOVASCULAR       : tibble [5 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ OTRO_CASO            : tibble [5 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ TOMA_MUESTRA_LAB     : tibble [5 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ TOMA_MUESTRA_ANTIGENO: tibble [5 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ OTRA_COMORBILIDAD    : tibble [5 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ OBESIDAD             : tibble [5 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ RENAL_CRONICA        : tibble [5 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ TABAQUISMO           : tibble [5 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ UCI                  : tibble [5 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ ENTIDAD_UM           : tibble [36 × 3] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ ENTIDAD_RES          : tibble [36 × 3] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ ENTIDAD_NAC          : tibble [36 × 3] (S3: tbl_df/tbl/data.frame)</span></span></code></pre></div>
<p>El proceso de descarga de cualquier base de <code>covidmx</code> es
un proceso inteligente. Si no ha pasado más de un día desde que
descargaste la base el programa te advertirá de que no tiene sentido
volver a descargar.</p>
<p>Podemos ver un ejemplo descargando sólo el diccionario (que ya
descargamos arriba con <code>descarga_datos_abiertos</code>)</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">diccionario_datos</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/descarga_datos_abiertos.html">descarga_diccionario</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: La descarga mas reciente de fue hace 0.02222 dias. Como tiene menos de un dia</span></span>
<span><span class="co">#&gt; usare esa. Escribe `force_download = TRUE` si quieres descargar de todas</span></span>
<span><span class="co">#&gt; formas. Para desactivar este mensaje `show_warnings = FALSE.`</span></span></code></pre></div>
<p>Si de todas maneras quieres reintentar la descarga puedes usar
<code>force_download = TRUE</code></p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">diccionario_datos</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/descarga_datos_abiertos.html">descarga_diccionario</a></span><span class="op">(</span>force_download <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>lo cual verificará mediante <a href="https://pins.rstudio.com/" class="external-link"><code>pins</code></a> que la base en
línea sea distinta de la que tienes almacenada y en caso afirmativo
descargará los datos.</p>
</div>
<div class="section level3">
<h3 id="lectura-de-base-de-datos-de-zip-o-csv">Lectura de base de datos de <code>zip</code> o <code>csv</code><a class="anchor" aria-label="anchor" href="#lectura-de-base-de-datos-de-zip-o-csv"></a>
</h3>
<p>Si el proceso de descarga se interrumpe en algún momento puedes leer
los datos abiertos de <code>zip</code> o bien del <code>csv</code>
descomprimido con <code>read_datos_abiertos</code> también:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Descarga sólo el zip</span></span>
<span><span class="va">zip_path</span>    <span class="op">&lt;-</span> <span class="fu"><a href="../reference/descarga_datos_abiertos.html">descarga_db_datos_abiertos_tbl</a></span><span class="op">(</span>sites.covid <span class="op">=</span> <span class="va">dlink</span>, show_warnings <span class="op">=</span> <span class="cn">F</span>, quiet <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span><span class="va">datos_covid</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_datos_abiertos.html">read_datos_abiertos</a></span><span class="op">(</span><span class="va">zip_path</span>, tblname <span class="op">=</span> <span class="st">"tutorial"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#O bien descomprime el zip y lee el csv</span></span>
<span><span class="va">csv_path</span>    <span class="op">&lt;-</span> <span class="fu"><a href="../reference/descarga_datos_abiertos.html">unzip_db_datos_abiertos_tbl</a></span><span class="op">(</span><span class="va">zip_path</span><span class="op">)</span></span>
<span><span class="va">datos_covid</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_datos_abiertos.html">read_datos_abiertos_csv</a></span><span class="op">(</span><span class="va">csv_path</span>, tblname <span class="op">=</span> <span class="st">"tutorial"</span><span class="op">)</span></span></code></pre></div>
<p>Lo mismo puedes hacer si tienes el diccionario descargado con las
variables <code>diccionario_zip_path</code>,
<code>diccionario_unzipped_path</code> y <code>diccionario</code> para
cuando el diciconario es un archivo <code>zip</code>, un archivo
<code>xlsx</code> o un <code>tibble</code> en tu sesiòn de
<code>R</code> (respectivamente) como sigue:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Descarga el diccionario en zip</span></span>
<span><span class="va">zip_path</span>    <span class="op">&lt;-</span> <span class="fu"><a href="../reference/descarga_datos_abiertos.html">descarga_db_diccionario_ssa</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">datos_covid</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_datos_abiertos.html">read_datos_abiertos</a></span><span class="op">(</span><span class="va">base_duck</span>, diccionario_zip_path <span class="op">=</span> <span class="va">zip_path</span>, tblname <span class="op">=</span> <span class="st">"tutorial"</span><span class="op">)</span></span></code></pre></div>
<p>Una vez descargados (o leídos), basta componer la base de datos con
cualquiera de las funciones para tener una tabla de datos agregada por
fecha y entidad.</p>
<p>Para terminar de usar los datos, nos desconectamos de la base
con:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos_covid</span><span class="op">$</span><span class="fu">disconnect</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Desconectado</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="lectura-de-la-base-de-datos-del-tutorial">Lectura de la base de datos del tutorial<a class="anchor" aria-label="anchor" href="#lectura-de-la-base-de-datos-del-tutorial"></a>
</h3>
<p>Para lo que sigue del tutorial usaremos los datos precargados:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos_covid</span> <span class="op">&lt;-</span> <span class="fu">covidmx</span><span class="fu">::</span><span class="va"><a href="../reference/datosabiertos.html">datosabiertos</a></span> <span class="co">#Uso de los datos precargados</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="casos">Casos (Incidencia)<a class="anchor" aria-label="anchor" href="#casos"></a>
</h3>
<p>Las bases de datos se agregan a la lista bajo el nombre default
<code>casos</code>. Por ejemplo:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos_covid</span> <span class="op">&lt;-</span> <span class="va">datos_covid</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/casos.html">casos</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>El objeto <code>casos</code> por default es un <code>tibble</code>
con el que ya puedes operar:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos_covid</span><span class="op">$</span><span class="va">casos</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 5</span></span></span>
<span><span class="co">#&gt;   FECHA_SINTOMAS ENTIDAD_UM     n ENTIDAD_FEDERATIVA  ABREVIATURA</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2021-07-01     02           229 BAJA CALIFORNIA     BC         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2021-07-01     03           794 BAJA CALIFORNIA SUR BS         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 2021-07-02     02           240 BAJA CALIFORNIA     BC         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 2021-07-02     03           535 BAJA CALIFORNIA SUR BS         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 2021-07-03     02           269 BAJA CALIFORNIA     BC         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 2021-07-03     03           646 BAJA CALIFORNIA SUR BS</span></span></code></pre></div>
<p>Nota que lo que hace es agregar por fecha y por entidad de la unidad
médica los casos.</p>
<p>Se puede filtar por entidad de la unidad médica seleccionando las
entidades de interés:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos_covid</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/casos.html">casos</a></span><span class="op">(</span>entidades <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"BAJA CALIFORNIA"</span>,<span class="st">"BAJA CALIFORNIA SUR"</span><span class="op">)</span>,</span>
<span>        list_name <span class="op">=</span> <span class="st">"BC/BCS"</span><span class="op">)</span> </span></code></pre></div>
<pre><code><span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 5</span></span></span>
<span><span class="co">#&gt;   FECHA_SINTOMAS ENTIDAD_UM     n ENTIDAD_FEDERATIVA  ABREVIATURA</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2021-07-01     02           229 BAJA CALIFORNIA     BC         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2021-07-01     03           794 BAJA CALIFORNIA SUR BS         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 2021-07-02     02           240 BAJA CALIFORNIA     BC         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 2021-07-02     03           535 BAJA CALIFORNIA SUR BS         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 2021-07-03     02           269 BAJA CALIFORNIA     BC         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 2021-07-03     03           646 BAJA CALIFORNIA SUR BS</span></span></code></pre>
<p>Si se quiere filtrar por entidad de nacimiento y que la fecha sea la
de ingreso, por ejemplo:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos_covid</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="../reference/casos.html">casos</a></span><span class="op">(</span>entidades    <span class="op">=</span> <span class="st">"BAJA CALIFORNIA"</span>,</span>
<span>          entidad_tipo <span class="op">=</span> <span class="st">"Nacimiento"</span>,</span>
<span>          fecha_tipo   <span class="op">=</span> <span class="st">"Ingreso"</span>,</span>
<span>          list_name    <span class="op">=</span> <span class="st">"DB_Filtro_Nac"</span><span class="op">)</span> </span></code></pre></div>
<pre><code><span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 5</span></span></span>
<span><span class="co">#&gt;   FECHA_INGRESO ENTIDAD_NAC     n ENTIDAD_FEDERATIVA ABREVIATURA</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2021-07-01    02             15 BAJA CALIFORNIA    BC         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2021-07-02    02             55 BAJA CALIFORNIA    BC         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 2021-07-03    02             27 BAJA CALIFORNIA    BC         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 2021-07-04    02             27 BAJA CALIFORNIA    BC         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 2021-07-05    02            224 BAJA CALIFORNIA    BC         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 2021-07-06    02            192 BAJA CALIFORNIA    BC</span></span></code></pre>
<p>Finalmente, si sólo se desean casos confirmados e inválidos:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos_covid</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="../reference/casos.html">casos</a></span><span class="op">(</span>entidades    <span class="op">=</span> <span class="st">"BAJA CALIFORNIA"</span>,</span>
<span>          entidad_tipo <span class="op">=</span> <span class="st">"Nacimiento"</span>,</span>
<span>          fecha_tipo   <span class="op">=</span> <span class="st">"Ingreso"</span>,</span>
<span>          tipo_clasificacion <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Confirmados COVID"</span>, <span class="st">"Invalido"</span><span class="op">)</span>,</span>
<span>          list_name <span class="op">=</span> <span class="st">"BC_conf_inv"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 5</span></span></span>
<span><span class="co">#&gt;   FECHA_INGRESO ENTIDAD_NAC     n ENTIDAD_FEDERATIVA ABREVIATURA</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2021-07-01    02              3 BAJA CALIFORNIA    BC         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2021-07-02    02              7 BAJA CALIFORNIA    BC         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 2021-07-03    02              5 BAJA CALIFORNIA    BC         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 2021-07-04    02              2 BAJA CALIFORNIA    BC         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 2021-07-05    02             35 BAJA CALIFORNIA    BC         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 2021-07-06    02             43 BAJA CALIFORNIA    BC</span></span></code></pre>
<p>Nota que por default el programa rellena con ceros lo que no se
observó. Si quieres cancelar esta opción basta con cambiar
<code>fill_zeros = FALSE</code>:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos_covid</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="../reference/casos.html">casos</a></span><span class="op">(</span>entidades    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"QUINTANA ROO"</span>,<span class="st">"AGUASCALIENTES"</span><span class="op">)</span>,</span>
<span>          entidad_tipo <span class="op">=</span> <span class="st">"Nacimiento"</span>,</span>
<span>          fecha_tipo   <span class="op">=</span> <span class="st">"Ingreso"</span>,</span>
<span>          tipo_clasificacion <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Confirmados COVID"</span>, <span class="st">"Invalido"</span><span class="op">)</span>,</span>
<span>          list_name <span class="op">=</span> <span class="st">"Sin fill zeros"</span>,</span>
<span>          fill_zeros <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 5</span></span></span>
<span><span class="co">#&gt;   FECHA_INGRESO ENTIDAD_NAC     n ENTIDAD_FEDERATIVA ABREVIATURA</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2021-07-05    01              1 AGUASCALIENTES     AS         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2021-07-09    23              1 QUINTANA ROO       QR         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 2021-07-10    23              1 QUINTANA ROO       QR         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 2021-07-11    01              1 AGUASCALIENTES     AS         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 2021-07-12    01              1 AGUASCALIENTES     AS         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 2021-07-13    01              1 AGUASCALIENTES     AS</span></span></code></pre>
<p>Si se desea que los casos vengan agregados (es decir
<code>QUINTANA ROO + AGUASCALIENTES</code>) se puede cambiar la opción
de <code>group_by_entidad</code> a <code>FALSE</code>:</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos_covid</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="../reference/casos.html">casos</a></span><span class="op">(</span>entidades          <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"QUINTANA ROO"</span>,<span class="st">"AGUASCALIENTES"</span><span class="op">)</span>,</span>
<span>          entidad_tipo       <span class="op">=</span> <span class="st">"Nacimiento"</span>,</span>
<span>          fecha_tipo         <span class="op">=</span> <span class="st">"Ingreso"</span>,</span>
<span>          tipo_clasificacion <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Confirmados COVID"</span>, <span class="st">"Invalido"</span><span class="op">)</span>,</span>
<span>          group_by_entidad   <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>          list_name          <span class="op">=</span>   <span class="st">"QROO_AGS_juntos"</span><span class="op">)</span> </span></code></pre></div>
<pre><code><span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 2</span></span></span>
<span><span class="co">#&gt;   FECHA_INGRESO     n</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2021-07-01        0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2021-07-02        0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 2021-07-03        0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 2021-07-04        0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 2021-07-05        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 2021-07-06        0</span></span></code></pre>
<p>La variable <code>edad_cut</code> te permite quedarte sòlo con un
grupo de edad o bien definir múltiples. Por ejemplo para quedarte sólo
con los casos de 5 a 25 años:</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos_covid</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/casos.html">casos</a></span><span class="op">(</span>edad_cut <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">25</span><span class="op">)</span>, list_name <span class="op">=</span> <span class="st">"5_25"</span><span class="op">)</span> </span></code></pre></div>
<pre><code><span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 6</span></span></span>
<span><span class="co">#&gt;   FECHA_SINTOMAS EDAD_CAT ENTIDAD_UM     n ENTIDAD_FEDERATIVA  ABREVIATURA</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2021-07-01     (5,25]   02            60 BAJA CALIFORNIA     BC         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2021-07-01     (5,25]   03           188 BAJA CALIFORNIA SUR BS         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 2021-07-02     (5,25]   02            50 BAJA CALIFORNIA     BC         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 2021-07-02     (5,25]   03           131 BAJA CALIFORNIA SUR BS         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 2021-07-03     (5,25]   02            57 BAJA CALIFORNIA     BC         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 2021-07-03     (5,25]   03           187 BAJA CALIFORNIA SUR BS</span></span></code></pre>
<p>O bien definir grupos de edad de la forma <code>0-20</code>,
<code>20-60</code> y <code>60+</code></p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos_covid</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/casos.html">casos</a></span><span class="op">(</span>edad_cut <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">20</span>, <span class="fl">60</span>, <span class="cn">Inf</span><span class="op">)</span>, list_name <span class="op">=</span> <span class="st">"0_20_60"</span><span class="op">)</span> </span></code></pre></div>
<pre><code><span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 6</span></span></span>
<span><span class="co">#&gt;   FECHA_SINTOMAS EDAD_CAT ENTIDAD_UM     n ENTIDAD_FEDERATIVA  ABREVIATURA</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2021-07-01     (0,20]   02            35 BAJA CALIFORNIA     BC         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2021-07-01     (0,20]   03           101 BAJA CALIFORNIA SUR BS         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 2021-07-01     (20,60]  02           172 BAJA CALIFORNIA     BC         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 2021-07-01     (20,60]  03           657 BAJA CALIFORNIA SUR BS         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 2021-07-01     (60,Inf] 02            20 BAJA CALIFORNIA     BC         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 2021-07-01     (60,Inf] 03            34 BAJA CALIFORNIA SUR BS</span></span></code></pre>
<p>Puedes acumular diferentes bases de datos en la misma lista
asignándoles nombres:</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos_covid</span> <span class="op">&lt;-</span> <span class="va">datos_covid</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/casos.html">casos</a></span><span class="op">(</span>list_name <span class="op">=</span> <span class="st">"Todos por entidad"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/casos.html">casos</a></span><span class="op">(</span>list_name <span class="op">=</span> <span class="st">"Todos (nacional)"</span>,    group_by_entidad <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/casos.html">casos</a></span><span class="op">(</span>list_name <span class="op">=</span> <span class="st">"Defunciones (todos)"</span>, defunciones <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> </span>
<span></span>
<span><span class="va">datos_covid</span><span class="op">$</span><span class="va">`Todos (nacional)`</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 2</span></span></span>
<span><span class="co">#&gt;   FECHA_SINTOMAS     n</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2021-07-01      <span style="text-decoration: underline;">1</span>023</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2021-07-02       775</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 2021-07-03       915</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 2021-07-04       960</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 2021-07-05      <span style="text-decoration: underline;">1</span>143</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 2021-07-06      <span style="text-decoration: underline;">1</span>068</span></span>
<span></span>
<span><span class="va">datos_covid</span><span class="op">$</span><span class="va">`Todos por entidad`</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 5</span></span></span>
<span><span class="co">#&gt;   FECHA_SINTOMAS ENTIDAD_UM     n ENTIDAD_FEDERATIVA  ABREVIATURA</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2021-07-01     02           229 BAJA CALIFORNIA     BC         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2021-07-01     03           794 BAJA CALIFORNIA SUR BS         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 2021-07-02     02           240 BAJA CALIFORNIA     BC         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 2021-07-02     03           535 BAJA CALIFORNIA SUR BS         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 2021-07-03     02           269 BAJA CALIFORNIA     BC         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 2021-07-03     03           646 BAJA CALIFORNIA SUR BS</span></span>
<span></span>
<span><span class="va">datos_covid</span><span class="op">$</span><span class="va">`Defunciones (todos)`</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 5</span></span></span>
<span><span class="co">#&gt;   FECHA_SINTOMAS ENTIDAD_UM     n ENTIDAD_FEDERATIVA  ABREVIATURA</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2021-07-01     02             5 BAJA CALIFORNIA     BC         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2021-07-01     03            37 BAJA CALIFORNIA SUR BS         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 2021-07-02     02             7 BAJA CALIFORNIA     BC         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 2021-07-02     03            11 BAJA CALIFORNIA SUR BS         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 2021-07-03     02             7 BAJA CALIFORNIA     BC         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 2021-07-03     03            22 BAJA CALIFORNIA SUR BS</span></span></code></pre></div>
<p>Hay múltiples opciones permitiendo seleccionar variables específicas
de unidades de cuidado intensivo, defunciones y si devolver la tabla
como <code>tibble</code> o como conexión de <code>dbplyr</code> a
<code>MARIADB</code>:</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos_covid</span> <span class="op">&lt;-</span> <span class="va">datos_covid</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/casos.html">casos</a></span><span class="op">(</span></span>
<span>    <span class="co">#Lista de entidades que deseas</span></span>
<span>    entidades <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AGUASCALIENTES"</span>, <span class="st">"BAJA CALIFORNIA"</span>, <span class="st">"BAJA CALIFORNIA SUR"</span>,</span>
<span>                      <span class="st">"CAMPECHE"</span>, <span class="st">"CHIAPAS"</span>, <span class="st">"CHIHUAHUA"</span>,<span class="st">"CIUDAD DE M\u00c9XICO"</span>,</span>
<span>                      <span class="st">"COAHUILA DE ZARAGOZA"</span> , <span class="st">"COLIMA"</span>, <span class="st">"DURANGO"</span>, <span class="st">"GUANAJUATO"</span>,</span>
<span>                      <span class="st">"GUERRERO"</span>,<span class="st">"HIDALGO"</span>, <span class="st">"JALISCO"</span>, <span class="st">"M\u00c9XICO"</span>,</span>
<span>                      <span class="st">"MICHOAC\u00c1N DE OCAMPO"</span>, <span class="st">"MORELOS"</span>,<span class="st">"NAYARIT"</span>,</span>
<span>                      <span class="st">"NUEVO LE\u00d3N"</span>, <span class="st">"OAXACA"</span>, <span class="st">"PUEBLA"</span>, <span class="st">"QUER\u00c9TARO"</span>,</span>
<span>                      <span class="st">"QUINTANA ROO"</span>, <span class="st">"SAN LUIS POTOS\u00cd"</span>, <span class="st">"SINALOA"</span>, <span class="st">"SONORA"</span>,</span>
<span>                      <span class="st">"TABASCO"</span>, <span class="st">"TAMAULIPAS"</span>, <span class="st">"TLAXCALA"</span>, <span class="st">"VERACRUZ DE IGNACIO DE LA LLAVE"</span>, </span>
<span>                      <span class="st">"YUCAT\u00c1N"</span>, <span class="st">"ZACATECAS"</span><span class="op">)</span>,</span>
<span>    </span>
<span>    <span class="co">#Si quieres que los resultados salgan por entidad = TRUE o ya agregados = FALSE</span></span>
<span>    group_by_entidad   <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    </span>
<span>    <span class="co">#Selecciona esas entidades a qué tipo de entidad refieren: Unidad Médica, Residencia, Nacimiento</span></span>
<span>    entidad_tipo       <span class="op">=</span> <span class="st">"Nacimiento"</span>, <span class="co">#c("Unidad Medica", "Residencia", "Nacimiento"),</span></span>
<span>    </span>
<span>    <span class="co">#Selecciona la fecha para la base de datos: Síntomas, Ingreso, Defunción</span></span>
<span>    fecha_tipo         <span class="op">=</span> <span class="st">"Ingreso"</span>,</span>
<span>    </span>
<span>    <span class="co">#Selecciona todas las variables de clasificación que deseas agregar:</span></span>
<span>    tipo_clasificacion <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Sospechosos"</span>,<span class="st">"Confirmados COVID"</span>, <span class="st">"Negativo a COVID"</span>, <span class="st">"Inválido"</span>, </span>
<span>                           <span class="st">"No realizado"</span><span class="op">)</span>,</span>
<span>    </span>
<span>    <span class="co">#Selecciona si deseas agrupar por la variable tipo_clasificacion</span></span>
<span>    group_by_tipo_clasificacion <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    </span>
<span>    <span class="co">#Selecciona todos los pacientes quieres incluir:</span></span>
<span>    tipo_paciente       <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AMBULATORIO"</span>, <span class="st">"HOSPITALIZADO"</span>, <span class="st">"NO ESPECIFICADO"</span><span class="op">)</span>,</span>
<span>    </span>
<span>    <span class="co">#Selecciona si agrupar por tipo de paciente</span></span>
<span>    group_by_tipo_paciente <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    </span>
<span>    <span class="co">#Selecciona todas las opciones de Unidad de Cuidado Intensivo del paciente:</span></span>
<span>    tipo_uci      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SI"</span>,<span class="st">"NO"</span>,<span class="st">"NO APLICA"</span>,<span class="st">"SE IGNORA"</span>,<span class="st">"NO ESPECIFICADO"</span><span class="op">)</span>,</span>
<span>    </span>
<span>    <span class="co">#Selecciona si agrupar por tipo de unidad</span></span>
<span>    group_by_tipo_uci  <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    </span>
<span>    <span class="co">#Selecciona los sectores del sistema de salud a incluir</span></span>
<span>    tipo_sector   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CRUZ ROJA"</span>, <span class="st">"DIF"</span>, <span class="st">"ESTATAL"</span>, <span class="st">"IMSS"</span>, <span class="st">"IMSS-BIENESTAR"</span>, <span class="st">"ISSSTE"</span>, </span>
<span>                      <span class="st">"MUNICIPAL"</span>, <span class="st">"PEMEX"</span>, <span class="st">"PRIVADA"</span>, <span class="st">"SEDENA"</span>, <span class="st">"SEMAR"</span>, <span class="st">"SSA"</span>, </span>
<span>                      <span class="st">"UNIVERSITARIO"</span>,<span class="st">"NO ESPECIFICADO"</span><span class="op">)</span>,</span>
<span>    </span>
<span>    <span class="co">#Selecciona si deseas agrupar por tipo de sector</span></span>
<span>    group_by_tipo_sector <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    </span>
<span>    <span class="co">#Selecciona si deseas sólo los que tuvieron defunción</span></span>
<span>    defunciones   <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    </span>
<span>    <span class="co">#Selecciona los grupos de edad que deseas incluir en rango</span></span>
<span>    edad_cut      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">40</span>, <span class="fl">60</span><span class="op">)</span>, <span class="co">#Edades 20-40 y 40-60</span></span>
<span>    </span>
<span>    <span class="co">#Selecciona si devolver el objeto como tibble</span></span>
<span>    as_tibble     <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    </span>
<span>    <span class="co">#Selecciona si rellenar los conteos (n) con ceros cuando no haya observaciones.</span></span>
<span>    fill_zeros    <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    </span>
<span>    <span class="co">#Nombre para llamarle en el objeto lista que regresa</span></span>
<span>    list_name     <span class="op">=</span> <span class="st">"Ejemplo defunciones"</span>,</span>
<span>    </span>
<span>    <span class="co">#Agrupa los resultados además por estado de diabetes y sexo</span></span>
<span>    .grouping_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"DIABETES"</span>, <span class="st">"SEXO"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Puedes ver la base generada así:</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos_covid</span><span class="op">$</span><span class="va">`Ejemplo defunciones`</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 14</span></span></span>
<span><span class="co">#&gt;   FECHA_INGR…¹ DIABE…²  SEXO EDAD_…³ ENTID…⁴ CLASI…⁵ TIPO_…⁶   UCI     n ENTID…⁷</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2021-07-01         2     2 (20,40] 03            3       2     2     2 BAJA C…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2021-07-02         2     2 (20,40] 20            3       2     2     1 OAXACA </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 2021-07-02         2     2 (40,60] 03            3       2     2     1 BAJA C…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 2021-07-02         2     2 (40,60] 15            3       2     2     1 MÉXICO </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 2021-07-03         2     2 (20,40] 02            7       2     1     1 BAJA C…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 2021-07-03         2     2 (40,60] 03            3       2     2     1 BAJA C…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 4 more variables: ABREVIATURA &lt;chr&gt;, CLASIFICACIÓN &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   DESCRIPCION_TIPO_PACIENTE &lt;chr&gt;, DESCRIPCION_TIPO_UCI &lt;chr&gt;, and</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   abbreviated variable names ¹​FECHA_INGRESO, ²​DIABETES, ³​EDAD_CAT,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ⁴​ENTIDAD_NAC, ⁵​CLASIFICACION_FINAL, ⁶​TIPO_PACIENTE, ⁷​ENTIDAD_FEDERATIVA</span></span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="número-de-pruebas">Número de pruebas<a class="anchor" aria-label="anchor" href="#n%C3%BAmero-de-pruebas"></a>
</h3>
<p>Para calcular el número de pruebas los argumentos son los mismos que
la función de <code>casos</code> con el agregado de que
<code>tipo_prueba</code> es un vector donde se seleccionan las pruebas a
considerar (<code>Antígeno</code> o <code>PCR</code>) y
<code>group_by_tipo_prueba</code> agrupa los resultados por tipo de
prueba</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos_covid</span> <span class="op">&lt;-</span> <span class="va">datos_covid</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/numero_pruebas.html">numero_pruebas</a></span><span class="op">(</span>entidades <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"BAJA CALIFORNIA"</span>,<span class="st">"BAJA CALIFORNIA SUR"</span><span class="op">)</span>,</span>
<span>                 tipo_prueba <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Antigeno"</span>, <span class="st">"PCR"</span><span class="op">)</span>,</span>
<span>                 group_by_tipo_prueba <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">datos_covid</span><span class="op">$</span><span class="va">numero_pruebas</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 6</span></span></span>
<span><span class="co">#&gt;   FECHA_SINTOMAS ENTIDAD_UM TIPO_PRUEBA     n ENTIDAD_FEDERATIVA  ABREVIATURA</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2021-07-01     02         ANTIGENO      208 BAJA CALIFORNIA     BC         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2021-07-01     02         PCR            37 BAJA CALIFORNIA     BC         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 2021-07-01     03         ANTIGENO      723 BAJA CALIFORNIA SUR BS         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 2021-07-01     03         PCR           119 BAJA CALIFORNIA SUR BS         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 2021-07-02     02         ANTIGENO      211 BAJA CALIFORNIA     BC         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 2021-07-02     02         PCR            53 BAJA CALIFORNIA     BC</span></span></code></pre></div>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos_covid</span><span class="op">$</span><span class="va">numero_pruebas</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/plot_covid.html">plot_covid</a></span><span class="op">(</span>facet_ncol <span class="op">=</span> <span class="fl">2</span>, date_break_format <span class="op">=</span> <span class="st">"1 month"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> `df_variable` no fue especificada. Usaremos la columna n</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> `df_covariates` no fue especificada. Usaremos `TIPO_PRUEBA and ENTIDAD_FEDERATIVA`</span></span></code></pre></div>
<p><img src="covidmx_files/figure-html/unnamed-chunk-34-1.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="positividad">Positividad<a class="anchor" aria-label="anchor" href="#positividad"></a>
</h3>
<p>Para calcular la positividad la única forma actual es con un
<code>tibble</code>. Los argumentos son los mismos que la función de
<code>casos</code> con el agregado de que <code>tipo_prueba</code> es un
vector donde se seleccionan las pruebas a considerar
(<code>Antígeno</code> o <code>PCR</code>) y
<code>group_by_tipo_prueba</code> agrupa los resultados por tipo de
prueba. La variable <code>remove_inconclusive</code> es una booleana
(default <code>TRUE</code>) que elimina del denominador de la
positividad las pruebas sin resultado o con resultado no
concluyente.</p>
<blockquote>
<p><strong>Nota</strong> Positividad es la variable más lenta de
calcular por ahora. Ten paciencia</p>
</blockquote>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos_covid</span> <span class="op">&lt;-</span> <span class="va">datos_covid</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/positividad.html">positividad</a></span><span class="op">(</span>entidades <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"BAJA CALIFORNIA"</span>,<span class="st">"BAJA CALIFORNIA SUR"</span><span class="op">)</span>,</span>
<span>                 tipo_prueba <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Antigeno"</span>, <span class="st">"PCR"</span><span class="op">)</span>,</span>
<span>                 group_by_tipo_prueba <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Leyendo la base...</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Calculando PCR...</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Calculando Antigeno...</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Terminando de construir la base</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Terminado</span></span>
<span></span>
<span><span class="va">datos_covid</span><span class="op">$</span><span class="va">positividad</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 8</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Groups:   FECHA_SINTOMAS, ENTIDAD_UM, TIPO_PRUEBA, ENTIDAD_FEDERATIVA,</span></span></span>
<span><span class="co"><span style="color: #949494;">#&gt; #   ABREVIATURA [6]</span></span></span>
<span><span class="co">#&gt;   Positividad FECHA_SINTOMAS ENTIDAD_UM TIPO_P…¹ ENTID…² ABREV…³ n_pru…⁴ n_pos…⁵</span></span>
<span><span class="co">#&gt;         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>       0.457 2021-07-01     02         PCR      BAJA C… BC           35      16</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>       0.587 2021-07-01     03         PCR      BAJA C… BS          109      64</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>       0.42  2021-07-02     02         PCR      BAJA C… BC           50      21</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>       0.571 2021-07-02     03         PCR      BAJA C… BS           70      40</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>       0.451 2021-07-03     02         PCR      BAJA C… BC           51      23</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span>       0.641 2021-07-03     03         PCR      BAJA C… BS           78      50</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with abbreviated variable names ¹​TIPO_PRUEBA, ²​ENTIDAD_FEDERATIVA,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ³​ABREVIATURA, ⁴​n_pruebas, ⁵​n_positivos</span></span></span></code></pre></div>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos_covid</span><span class="op">$</span><span class="va">positividad</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/plot_covid.html">plot_covid</a></span><span class="op">(</span>facet_ncol <span class="op">=</span> <span class="fl">2</span>, </span>
<span>             facet_scale <span class="op">=</span> <span class="st">"fixed"</span>,</span>
<span>             type <span class="op">=</span> <span class="st">"spline"</span>,</span>
<span>             df_variable <span class="op">=</span> <span class="st">"Positividad"</span>,</span>
<span>             date_break_format <span class="op">=</span> <span class="st">"7 days"</span>,</span>
<span>             date_labels_format <span class="op">=</span> <span class="st">"%d/%m/%Y"</span>,</span>
<span>             df_covariates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"TIPO_PRUEBA"</span>, <span class="st">"ENTIDAD_FEDERATIVA"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="covidmx_files/figure-html/unnamed-chunk-36-1.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="case-hospitalization-rate">Case Hospitalization Rate<a class="anchor" aria-label="anchor" href="#case-hospitalization-rate"></a>
</h3>
<p>El <code>chr</code> se define como el total de casos confirmados que
terminaron hospitalizados entre el total de confirmados: <span class="math display">\[
\textrm{CHR} = \frac{\text{Hospitalizados Confirmados}}{\text{Todos los
confirmados}}
\]</span> lo puedes calcular con <code>chr</code>:</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos_covid</span> <span class="op">&lt;-</span> <span class="va">datos_covid</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/chr.html">chr</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 5</span></span></span>
<span><span class="co">#&gt;   FECHA_SINTOMAS ENTIDAD_UM ENTIDAD_FEDERATIVA  ABREVIATURA CASE HOSPITALIZATI…¹</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2021-07-01     02         BAJA CALIFORNIA     BC                         0.2  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2021-07-01     03         BAJA CALIFORNIA SUR BS                         0.179</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 2021-07-02     02         BAJA CALIFORNIA     BC                         0.277</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 2021-07-02     03         BAJA CALIFORNIA SUR BS                         0.101</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 2021-07-03     02         BAJA CALIFORNIA     BC                         0.172</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 2021-07-03     03         BAJA CALIFORNIA SUR BS                         0.1  </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with abbreviated variable name ¹​`CASE HOSPITALIZATION RATE`</span></span></span></code></pre>
<p>Las variables para agrupar son casi las mismas que en
<code>casos</code>. Por ejemplo si queremos agrupar el <code>chr</code>
en distintas categorías de edad a nivel nacional:</p>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos_covid</span> <span class="op">&lt;-</span> <span class="va">datos_covid</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/chr.html">chr</a></span><span class="op">(</span></span>
<span>    group_by_entidad <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    edad_cut  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">20</span>, <span class="fl">50</span>, <span class="cn">Inf</span><span class="op">)</span>,</span>
<span>    list_name <span class="op">=</span> <span class="st">"CHR_edad_nacional"</span></span>
<span>  <span class="op">)</span> </span>
<span></span>
<span><span class="va">datos_covid</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/plot_covid.html">plot_covid</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"line"</span>, </span>
<span>             facet_ncol <span class="op">=</span> <span class="fl">4</span>, </span>
<span>             date_break_format <span class="op">=</span> <span class="st">"7 days"</span>,</span>
<span>             date_labels_format <span class="op">=</span> <span class="st">"%d/%m/%Y"</span>,</span>
<span>             df_name <span class="op">=</span> <span class="st">"CHR_edad_nacional"</span><span class="op">)</span></span></code></pre></div>
<p><img src="covidmx_files/figure-html/unnamed-chunk-39-1.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="case-fatality-rate">Case Fatality Rate<a class="anchor" aria-label="anchor" href="#case-fatality-rate"></a>
</h3>
<p>El <code>cfr</code> se define como el total de casos confirmados que
terminaron muertos: <span class="math display">\[
\textrm{CFR} = \frac{\text{Defunciones Confirmadas}}{\text{Todos los
confirmados}}
\]</span> lo puedes calcular con <code>cfr</code>:</p>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos_covid</span> <span class="op">&lt;-</span> <span class="va">datos_covid</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/cfr.html">cfr</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 5</span></span></span>
<span><span class="co">#&gt;   FECHA_SINTOMAS ENTIDAD_UM ENTIDAD_FEDERATIVA  ABREVIATURA `CASE FATALITY RATE`</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2021-07-01     02         BAJA CALIFORNIA     BC                        0.075 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2021-07-01     03         BAJA CALIFORNIA SUR BS                        0.092<span style="text-decoration: underline;">1</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 2021-07-02     02         BAJA CALIFORNIA     BC                        0.063<span style="text-decoration: underline;">8</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 2021-07-02     03         BAJA CALIFORNIA SUR BS                        0.037<span style="text-decoration: underline;">3</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 2021-07-03     02         BAJA CALIFORNIA     BC                        0.086<span style="text-decoration: underline;">2</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 2021-07-03     03         BAJA CALIFORNIA SUR BS                        0.058<span style="text-decoration: underline;">8</span></span></span></code></pre>
<p>Las variables para agrupar son casi las mismas que en
<code>casos</code>. Por ejemplo si queremos agrupar el <code>cfr</code>
en distintas categorías de edad a nivel nacional:</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos_covid</span> <span class="op">&lt;-</span> <span class="va">datos_covid</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/cfr.html">cfr</a></span><span class="op">(</span>entidades <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"BAJA CALIFORNIA"</span>, <span class="st">"BAJA CALIFORNIA SUR"</span><span class="op">)</span>,</span>
<span>    group_by_entidad <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    list_name <span class="op">=</span> <span class="st">"CFR_BC"</span></span>
<span>  <span class="op">)</span> </span>
<span></span>
<span><span class="va">datos_covid</span><span class="op">$</span><span class="va">CFR_BC</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/plot_covid.html">plot_covid</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"line"</span>, </span>
<span>             facet_ncol <span class="op">=</span> <span class="fl">2</span>,</span>
<span>             date_break_format <span class="op">=</span> <span class="st">"7 days"</span>,</span>
<span>             date_labels_format <span class="op">=</span> <span class="st">"%d/%m/%Y"</span><span class="op">)</span></span></code></pre></div>
<p><img src="covidmx_files/figure-html/unnamed-chunk-42-1.png" width="700"></p>
<p>Podemos también calcular la mortalidad dentro de los hospitalizados y
ambulatorios:</p>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos_covid</span> <span class="op">&lt;-</span> <span class="va">datos_covid</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/cfr.html">cfr</a></span><span class="op">(</span></span>
<span>    tipo_paciente <span class="op">=</span> <span class="st">"HOSPITALIZADO"</span>,</span>
<span>    group_by_entidad       <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    list_name <span class="op">=</span> <span class="st">"CFR_HOSPITALIZADOS"</span></span>
<span>  <span class="op">)</span> </span>
<span></span>
<span><span class="va">datos_covid</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/plot_covid.html">plot_covid</a></span><span class="op">(</span>df_name <span class="op">=</span> <span class="st">"CFR_HOSPITALIZADOS"</span>, </span>
<span>             type <span class="op">=</span> <span class="st">"line"</span>, </span>
<span>             facet_ncol <span class="op">=</span> <span class="fl">2</span>,</span>
<span>             date_break_format <span class="op">=</span> <span class="st">"7 days"</span>,</span>
<span>             date_labels_format <span class="op">=</span> <span class="st">"%d/%m/%Y"</span>,</span>
<span>             df_variable <span class="op">=</span> <span class="st">"CASE FATALITY RATE"</span><span class="op">)</span></span></code></pre></div>
<p><img src="covidmx_files/figure-html/unnamed-chunk-43-1.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="número-efectivo-de-reproducción">Número efectivo de reproducción<a class="anchor" aria-label="anchor" href="#n%C3%BAmero-efectivo-de-reproducci%C3%B3n"></a>
</h3>
<p>El número efectivo de reproducción se estima mediante la función
<code><a href="https://rdrr.io/pkg/EpiEstim/man/estimate_R.html" class="external-link">EpiEstim::estimate_R</a></code> para la cual es necesario especificar
el método y el intervalo serial <a href="https://cran.r-project.org/web/packages/EpiEstim/vignettes/demo.html" class="external-link">como
en este ejemplo</a>.</p>
<p>Podemos estimar el número a nivel nacional a partir de 2022:</p>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos_covid</span> <span class="op">&lt;-</span> <span class="va">datos_covid</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/estima_rt.html">estima_rt</a></span><span class="op">(</span>entidades <span class="op">=</span> <span class="st">"BAJA CALIFORNIA"</span>,</span>
<span>            min_date  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2021/07/01"</span>, format <span class="op">=</span> <span class="st">"%Y/%m/%d"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 17</span></span></span>
<span><span class="co">#&gt;   ENTIDA…¹ ENTID…² ABREV…³ t_start t_end Mean(…⁴ Std(R…⁵ Quant…⁶ Quant…⁷ Quant…⁸</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 02       BAJA C… BC            2     8    1.61  0.036<span style="text-decoration: underline;">2</span>    1.54    1.55    1.58</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 02       BAJA C… BC            3     9    1.33  0.029<span style="text-decoration: underline;">7</span>    1.28    1.29    1.31</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 02       BAJA C… BC            4    10    1.18  0.026<span style="text-decoration: underline;">1</span>    1.12    1.13    1.16</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 02       BAJA C… BC            5    11    1.11  0.024<span style="text-decoration: underline;">4</span>    1.07    1.07    1.10</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 02       BAJA C… BC            6    12    1.09  0.023<span style="text-decoration: underline;">6</span>    1.04    1.05    1.07</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 02       BAJA C… BC            7    13    1.08  0.023<span style="text-decoration: underline;">2</span>    1.04    1.05    1.07</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 7 more variables: `Median(R)` &lt;dbl&gt;, `Quantile.0.75(R)` &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Quantile.0.95(R)` &lt;dbl&gt;, `Quantile.0.975(R)` &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   FECHA_SINTOMAS_start &lt;date&gt;, FECHA_SINTOMAS_end &lt;date&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   FECHA_SINTOMAS &lt;date&gt;, and abbreviated variable names ¹​ENTIDAD_UM,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ²​ENTIDAD_FEDERATIVA, ³​ABREVIATURA, ⁴​`Mean(R)`, ⁵​`Std(R)`,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ⁶​`Quantile.0.025(R)`, ⁷​`Quantile.0.05(R)`, ⁸​`Quantile.0.25(R)`</span></span></span></code></pre>
<p>O bien por entidad sólo con los confirmados covid:</p>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos_covid</span> <span class="op">&lt;-</span> <span class="va">datos_covid</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/estima_rt.html">estima_rt</a></span><span class="op">(</span>tipo_clasificacion <span class="op">=</span> <span class="st">"Confirmados COVID"</span>,</span>
<span>     list_name <span class="op">=</span> <span class="st">"RT_confirmados_COVID"</span>,</span>
<span>     min_date  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2021/07/01"</span>, format <span class="op">=</span> <span class="st">"%Y/%m/%d"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">datos_covid</span><span class="op">$</span><span class="va">RT_confirmados_COVID</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/plot_covid.html">plot_covid</a></span><span class="op">(</span>df_date_index <span class="op">=</span> <span class="st">"FECHA_SINTOMAS"</span>, </span>
<span>             df_variable <span class="op">=</span> <span class="st">"Mean(R)"</span>,</span>
<span>             df_covariates <span class="op">=</span> <span class="st">"ENTIDAD_FEDERATIVA"</span>,</span>
<span>             date_break_format <span class="op">=</span> <span class="st">"7 days"</span>,</span>
<span>             date_labels_format <span class="op">=</span> <span class="st">"%d/%m/%Y"</span><span class="op">)</span></span></code></pre></div>
<p><img src="covidmx_files/figure-html/unnamed-chunk-46-1.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="desconexión-de-duckdb">Desconexión de duckdb<a class="anchor" aria-label="anchor" href="#desconexi%C3%B3n-de-duckdb"></a>
</h3>
<p>Una vez que terminaste de trabajar con la base original en
<code>duckdb</code> deconecta el pointer haciendo:</p>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos_covid</span><span class="op">$</span><span class="fu">disconnect</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="datos-de-variantes-gisaid">Datos de variantes (GISAID)<a class="anchor" aria-label="anchor" href="#datos-de-variantes-gisaid"></a>
</h2>
<p>Para descargar las variantes reportadas por la publicación diaria en
Github del reporte nacional en <a href="https://github.com/RodrigoZepeda/VariantesCovid" class="external-link">RodrigoZepeda/VariantesCovid</a>
a partir de las variantes de <a href="www.gisaid.org">GISAID</a> puedes
hacer:</p>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">variantes_covid</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/descarga_datos_variantes_GISAID.html">descarga_datos_variantes_GISAID</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Los datos se ven así:</p>
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">variantes_covid</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 7</span></span></span>
<span><span class="co">#&gt;   variant     semana   ano     n  freq Actualizacion       Fuente               </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> VOI Epsilon     28  <span style="text-decoration: underline;">2</span>020     1     1 2022-09-05 <span style="color: #949494;">03:14:30</span> GISAID: https://www.…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> VOI Epsilon     38  <span style="text-decoration: underline;">2</span>020     1     1 2022-09-05 <span style="color: #949494;">03:14:30</span> GISAID: https://www.…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> VOC Delta       39  <span style="text-decoration: underline;">2</span>020     2     1 2022-09-05 <span style="color: #949494;">03:14:30</span> GISAID: https://www.…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> VOI Epsilon     46  <span style="text-decoration: underline;">2</span>020     1     1 2022-09-05 <span style="color: #949494;">03:14:30</span> GISAID: https://www.…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> VOI Epsilon     47  <span style="text-decoration: underline;">2</span>020     2     1 2022-09-05 <span style="color: #949494;">03:14:30</span> GISAID: https://www.…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> VOI Epsilon     48  <span style="text-decoration: underline;">2</span>020     5     1 2022-09-05 <span style="color: #949494;">03:14:30</span> GISAID: https://www.…</span></span></code></pre></div>
<p>Por <code>default</code> baja nacional pero también puedes usar
“cdmx”:</p>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">variantes_covid</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/descarga_datos_variantes_GISAID.html">descarga_datos_variantes_GISAID</a></span><span class="op">(</span><span class="st">"cdmx"</span><span class="op">)</span></span></code></pre></div>
<p>En este caso, la descarga también es inteligente y necesitas poner
<code>force_download = TRUE</code> si ha pasado menos de un día de tu
última descarga (almacenada mediante <code>pins</code> en cache) y
quieres volver a bajar los datos.</p>
<p>Puedes graficarlos con <code>geom_stream</code> dentro de la librería
<code>ggstream</code>:</p>
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Pasamos año y semana epidemiológica a fecha</span></span>
<span><span class="va">variantes_covid</span> <span class="op">&lt;-</span> <span class="va">variantes_covid</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>fecha <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2020/01/03"</span>, format <span class="op">=</span> <span class="st">"%Y/%m/%d"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                           by <span class="op">=</span> <span class="st">"7 days"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>ano    <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/year.html" class="external-link">epiyear</a></span><span class="op">(</span><span class="va">fecha</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>semana <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/week.html" class="external-link">epiweek</a></span><span class="op">(</span><span class="va">fecha</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span><span class="co">#&gt; Joining, by = c("semana", "ano")</span></span>
<span></span>
<span><span class="co">#Graficamos</span></span>
<span><span class="va">nvariantes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">variantes_covid</span><span class="op">$</span><span class="va">variant</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">variantes_covid</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">ggstream</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/ggstream/man/geom_stream.html" class="external-link">geom_stream</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">fecha</span>, y <span class="op">=</span> <span class="va">n</span>, fill <span class="op">=</span> <span class="va">variant</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_void</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span></span>
<span>    legend.position <span class="op">=</span> <span class="st">"bottom"</span>,</span>
<span>    axis.text.x     <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">90</span>, hjust <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>    axis.line.x     <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_line</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    axis.ticks.x    <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_line</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html" class="external-link">scale_x_date</a></span><span class="op">(</span>date_breaks <span class="op">=</span> <span class="st">"3 months"</span>, date_labels <span class="op">=</span> <span class="st">"%b/%Y"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_fill_manual</a></span><span class="op">(</span><span class="st">"Variante"</span>, values <span class="op">=</span> <span class="fu">MetBrewer</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/MetBrewer/man/met.brewer.html" class="external-link">met.brewer</a></span><span class="op">(</span><span class="st">"Cross"</span>, n <span class="op">=</span>  <span class="va">nvariantes</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="st">"Variantes de COVID-19 en México"</span><span class="op">)</span></span></code></pre></div>
<p><img src="covidmx_files/figure-html/unnamed-chunk-51-1.png" width="700"></p>
<blockquote>
<p>No olvides citar a <strong>GISAID</strong> así como a la publicación
diaria en <a href="https://github.com/RodrigoZepeda/VariantesCovid" class="external-link">RodrigoZepeda/VariantesCovid</a>
si las usas.</p>
</blockquote>
</div>
<div class="section level2">
<h2 id="datos-de-ocupación-hospitalaria-red-irag">Datos de ocupación hospitalaria (Red IRAG)<a class="anchor" aria-label="anchor" href="#datos-de-ocupaci%C3%B3n-hospitalaria-red-irag"></a>
</h2>
<p>Puedes descargar los datos de la <a href="https://www.gits.igg.unam.mx/red-irag-dashboard/reviewHome#" class="external-link">Red
IRAG</a> de ocupación hospitalaria a nivel estatal o a nivel unidad
médica mediante <code>descarga_datos_red_irag</code>. Estos se obtienen
de la publicación diaria en <a href="https://github.com/RodrigoZepeda/CapacidadHospitalariaMX" class="external-link">RodrigoZepeda/CapacidadHospitalariaMX</a>.</p>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">estatales</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/descarga_datos_red_irag.html">descarga_datos_red_irag</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Los cuales se ven así:</p>
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">estatales</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/plot_covid.html">plot_covid</a></span><span class="op">(</span>df_covariates <span class="op">=</span> <span class="st">"Estado"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> `df_variable` no fue especificada. Usaremos la columna Hospitalizados (%)</span></span></code></pre></div>
<p><img src="covidmx_files/figure-html/ocupacion-1.png" width="768"></p>
<p>O bien por unidad médica:</p>
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">unidad_medica</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/descarga_datos_red_irag.html">descarga_datos_red_irag</a></span><span class="op">(</span>nivel <span class="op">=</span> <span class="st">"Unidad Médica"</span><span class="op">)</span></span></code></pre></div>
<p>que se ven así:</p>
<div class="sourceCode" id="cb58"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">unidad_medica</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 9</span></span></span>
<span><span class="co">#&gt;   `Unidad médica`        Estado Insti…¹ CLUES Hospi…² Venti…³ UCI y…⁴ Fecha     </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Hospital Regional de … México SSA/CC  MCSS…     100      17      33 2020-04-01</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Hospital Juárez de Mé… Ciuda… SSA/CC  DFSS…     100      89      89 2020-04-01</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Instituto Nacional de… Ciuda… SSA/CC  DFSS…     100       0       0 2020-04-01</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Instituto Nacional de… Ciuda… SSA/CC  DFSS…     100      94      94 2020-04-01</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Instituto Nacional de… Ciuda… SSA/CC  DFSS…     100      50      50 2020-04-01</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> Instituto Nacional de… Ciuda… SSA/CC  DFSS…     100      10      10 2020-04-01</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 1 more variable: Actualizacion &lt;dttm&gt;, and abbreviated variable names</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ¹​Institución, ²​`Hospitalizados (%)`, ³​`Ventilación (%)`,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ⁴​`UCI y Ventilación (%)`</span></span></span></code></pre></div>
<p>En este caso, la descarga también es inteligente y necesitas poner
<code>force_download = TRUE</code> si ha pasado menos de un día de tu
última descarga (almacenada mediante <code>pins</code> en cache) y
quieres volver a bajar los datos.</p>
<blockquote>
<p>No olvides citar a <strong>RED IRAG</strong> así como a la
publicación diaria en <a href="https://github.com/RodrigoZepeda/CapacidadHospitalariaMX" class="external-link">RodrigoZepeda/CapacidadHospitalariaMX</a>
si las usas.</p>
</blockquote>
</div>
<div class="section level2">
<h2 id="gráficas">Gráficas<a class="anchor" aria-label="anchor" href="#gr%C3%A1ficas"></a>
</h2>
<p>Para graficar puedes usar la función <code>plot_covid</code> por
default grafica lo que està en <code>datos_covid$casos</code> y
establecer cada cuándo hacer los cortes de fechas con
<code>date_break_format</code></p>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos_covid</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/plot_covid.html">plot_covid</a></span><span class="op">(</span>date_break_format <span class="op">=</span> <span class="st">"1 week"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> `df_variable` no fue especificada. Usaremos la columna n</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> `df_covariates` no fue especificada. Usaremos `ENTIDAD_FEDERATIVA`</span></span></code></pre></div>
<p><img src="covidmx_files/figure-html/nacionalentidad-1.png" width="700"></p>
<p>pero puedes pedir otra con el eje x más limpio:</p>
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos_covid</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/plot_covid.html">plot_covid</a></span><span class="op">(</span><span class="st">"Todos (nacional)"</span>, </span>
<span>                           date_break_format <span class="op">=</span> <span class="st">"1 week"</span>,</span>
<span>                           date_labels_format <span class="op">=</span> <span class="st">"%m/%y"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> `df_variable` no fue especificada. Usaremos la columna n</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> `df_covariates` no fue especificada. Usaremos ``</span></span></code></pre></div>
<p><img src="covidmx_files/figure-html/nacional-1.png" width="700"></p>
<p>Para visualizar un suavizamiento con <em>splines</em> cambia el
<code>type</code> y dale las opciones que darías a
<code>geom_spline</code>:</p>
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos_covid</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/plot_covid.html">plot_covid</a></span><span class="op">(</span><span class="st">"Todos (nacional)"</span>, type <span class="op">=</span> <span class="st">"spline"</span>, spar <span class="op">=</span> <span class="fl">0.5</span>, date_break_format <span class="op">=</span> <span class="st">"1 week"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> `df_variable` no fue especificada. Usaremos la columna n</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> `df_covariates` no fue especificada. Usaremos ``</span></span></code></pre></div>
<p><img src="covidmx_files/figure-html/splineacional-1.png" width="700"></p>
<p>Puedes visualizar hasta dos covariables a la vez con
<code>df_covariates</code> y decirle cuál graficar con
<code>df_variable</code>:</p>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos_covid</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/plot_covid.html">plot_covid</a></span><span class="op">(</span><span class="st">"Ejemplo defunciones"</span>, </span>
<span>             df_variable <span class="op">=</span> <span class="st">"n"</span>, </span>
<span>             df_covariates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SEXO"</span>,<span class="st">"ENTIDAD_FEDERATIVA"</span><span class="op">)</span>,</span>
<span>             date_break_format <span class="op">=</span> <span class="st">"3 weeks"</span>,</span>
<span>             type <span class="op">=</span> <span class="st">"area"</span><span class="op">)</span> </span></code></pre></div>
<p><img src="covidmx_files/figure-html/unnamed-chunk-55-1.png" width="768"></p>
</div>
<div class="section level2">
<h2 id="desconexión">Desconexión<a class="anchor" aria-label="anchor" href="#desconexi%C3%B3n"></a>
</h2>
<p>No olvides, cuando termines de usar <code>duckdb</code>
desconectarte:</p>
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos_covid</span><span class="op">$</span><span class="fu">disconnect</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="información-adicional">Información adicional<a class="anchor" aria-label="anchor" href="#informaci%C3%B3n-adicional"></a>
</h2>
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/sessionInfo.html" class="external-link">sessionInfo</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; R version 4.2.0 (2022-04-22)</span></span>
<span><span class="co">#&gt; Platform: x86_64-apple-darwin17.0 (64-bit)</span></span>
<span><span class="co">#&gt; Running under: macOS Big Sur/Monterey 10.16</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Matrix products: default</span></span>
<span><span class="co">#&gt; BLAS:   /Library/Frameworks/R.framework/Versions/4.2/Resources/lib/libRblas.0.dylib</span></span>
<span><span class="co">#&gt; LAPACK: /Library/Frameworks/R.framework/Versions/4.2/Resources/lib/libRlapack.dylib</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; locale:</span></span>
<span><span class="co">#&gt; [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; attached base packages:</span></span>
<span><span class="co">#&gt; [1] stats     graphics  grDevices utils     datasets  methods   base     </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; other attached packages:</span></span>
<span><span class="co">#&gt; [1] ggplot2_3.3.6      dplyr_1.0.10       covidmx_0.6.0.0000</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; loaded via a namespace (and not attached):</span></span>
<span><span class="co">#&gt;   [1] mcmc_0.9-7            bitops_1.0-7          fs_1.5.2             </span></span>
<span><span class="co">#&gt;   [4] bit64_4.0.5           lubridate_1.8.0       httr_1.4.4           </span></span>
<span><span class="co">#&gt;   [7] rprojroot_2.0.3       tools_4.2.0           bslib_0.4.0          </span></span>
<span><span class="co">#&gt;  [10] utf8_1.2.2            R6_2.5.1              coarseDataTools_0.6-6</span></span>
<span><span class="co">#&gt;  [13] DBI_1.1.3             colorspace_2.0-3      duckdb_0.4.0         </span></span>
<span><span class="co">#&gt;  [16] withr_2.5.0           tidyselect_1.1.2      gridExtra_2.3        </span></span>
<span><span class="co">#&gt;  [19] EpiEstim_2.2-4        bit_4.0.4             curl_4.3.2           </span></span>
<span><span class="co">#&gt;  [22] compiler_4.2.0        quantreg_5.94         textshaping_0.3.6    </span></span>
<span><span class="co">#&gt;  [25] cli_3.3.0             SparseM_1.81          desc_1.4.1           </span></span>
<span><span class="co">#&gt;  [28] labeling_0.4.2        sass_0.4.2            mosaicCore_0.9.2     </span></span>
<span><span class="co">#&gt;  [31] scales_1.2.1          readr_2.1.2           ggridges_0.5.3       </span></span>
<span><span class="co">#&gt;  [34] rappdirs_0.3.3        pkgdown_2.0.6         ggstream_0.1.0       </span></span>
<span><span class="co">#&gt;  [37] systemfonts_1.0.4     stringr_1.4.1         digest_0.6.29        </span></span>
<span><span class="co">#&gt;  [40] ggformula_0.10.2      rmarkdown_2.16        MCMCpack_1.6-3       </span></span>
<span><span class="co">#&gt;  [43] pkgconfig_2.0.3       htmltools_0.5.3       labelled_2.9.1       </span></span>
<span><span class="co">#&gt;  [46] dbplyr_2.2.1          fastmap_1.1.0         highr_0.9            </span></span>
<span><span class="co">#&gt;  [49] rlang_1.0.5           readxl_1.4.1          rstudioapi_0.14      </span></span>
<span><span class="co">#&gt;  [52] jquerylib_0.1.4       farver_2.1.1          generics_0.1.3       </span></span>
<span><span class="co">#&gt;  [55] jsonlite_1.8.0        vroom_1.5.7           RCurl_1.98-1.8       </span></span>
<span><span class="co">#&gt;  [58] magrittr_2.0.3        Matrix_1.4-1          Rcpp_1.0.9           </span></span>
<span><span class="co">#&gt;  [61] munsell_0.5.0         fansi_1.0.3           MetBrewer_0.2.0      </span></span>
<span><span class="co">#&gt;  [64] lifecycle_1.0.1       stringi_1.7.8         yaml_2.3.5           </span></span>
<span><span class="co">#&gt;  [67] MASS_7.3-58.1         plyr_1.8.7            ggstance_0.3.5       </span></span>
<span><span class="co">#&gt;  [70] grid_4.2.0            blob_1.2.3            parallel_4.2.0       </span></span>
<span><span class="co">#&gt;  [73] forcats_0.5.2         crayon_1.5.1          lattice_0.20-45      </span></span>
<span><span class="co">#&gt;  [76] splines_4.2.0         haven_2.5.1           hms_1.1.2            </span></span>
<span><span class="co">#&gt;  [79] knitr_1.40            pillar_1.8.1          reshape2_1.4.4       </span></span>
<span><span class="co">#&gt;  [82] glue_1.6.2            evaluate_0.16         vctrs_0.4.1          </span></span>
<span><span class="co">#&gt;  [85] tzdb_0.3.0            tweenr_2.0.1          MatrixModels_0.5-0   </span></span>
<span><span class="co">#&gt;  [88] cellranger_1.1.0      gtable_0.3.1          purrr_0.3.4          </span></span>
<span><span class="co">#&gt;  [91] polyclip_1.10-0       tidyr_1.2.0           incidence_1.7.3      </span></span>
<span><span class="co">#&gt;  [94] assertthat_0.2.1      cachem_1.0.6          xfun_0.32            </span></span>
<span><span class="co">#&gt;  [97] pins_1.0.2            ggforce_0.3.4         coda_0.19-4          </span></span>
<span><span class="co">#&gt; [100] survival_3.4-0        ragg_1.2.2            tibble_3.1.8         </span></span>
<span><span class="co">#&gt; [103] memoise_2.0.1         fitdistrplus_1.1-8    ellipsis_0.3.2</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>En esta página</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Desarrollado por Rodrigo Zepeda-Tello, Mauricio Hernandez-Avila.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Sitio creado con <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
